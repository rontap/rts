<!DOCTYPE HTML>
<HTML>
	<Head>
		<title>Kikérdező</title>
	  <meta charset="UTF-8">
		<meta name="author" content="TAP">
	  <meta name="description" content="rontap">
		<meta name="keywords" content="rontap,linux,TaPium,tapsite,rts,rjsx">
	 <script src="goog.js" type="text/javascript"></script>
	<link rel="stylesheet" type="text/css" href="main.css">
	<script>
		appver="Edu\n TAPIS/calkr.js 1.6 ";
		sited="ttest.html";
		navname="KiKérdező csináló"; //hogy jelenik majd meg
		navplus="2 számológép";
		coa=false;		
		pack="rontap.mainHelp/kikerdezo";
		moretag=true;
		//holvan
		manimg="f_icons/dia.svg";
</script>

	</Head>

<script>
newkik = false;
if (localStorage.getItem("kerd") === null) {
  localStorage.kerd="";
}
function initkerd()
{
	kerd =[];
	kerd[0]=1;
	for (i=1;i<50;i++)
	{
		kerd[i] = new Object
		kerd[i] = {kerdes:[], valasz:[], "nev":i, "stamp":0};
	}
}
//kerd = JSON.stringify(kikerdezo);

var munkamenet; 
kerdes = new Array();
valasz = new Array();
var jkerdes;//jelenlegi kerdes szam
filledto=0;
var pontszam;
//feltoltes
for (i=0;i<101;i++)
{
	kerdes[i]="";
	valasz[i]="";
}
kerdess=1;
function addrow() {
	
kerdess++;

	
	if(kerdess>100)
	{
	alert('Sajnos csak 100 kerdes lehet egy kikerdezoben');
	return false;
	}
	//kerdesekq.innerHTML+='<input type="text" class="inp-text" placeholder="kerdes '+kerdess+'" id="k'+kerdess+'"> : <input type="text" class="inp-text" placeholder="valasz '+kerdess+'" id="v'+kerdess+'"><br>';
	//kerdesekq.innerHTML+='<tr><td><input value=""></td></tr>';
	for (i=1;i<kerdess;i++)
	{
		if (window['k'+i].value!=""  )
		{
		kerdes[i]=window['k'+i].value;
		valasz[i]=window['v'+i].value;
		}
		else if (window['v'+i].value!="" )
		{
		kerdes[i]=window['k'+i].value;
		valasz[i]=window['v'+i].value;
		}
	}
	a='<tr>';
	a+='<td><textarea type="text" class="inp-text" placeholder="kerdes '+kerdess+'" id="k'+kerdess+'"></textarea></td> ';	
	a+='<td><input type="text" class="inp-text" placeholder="valasz '+kerdess+'" id="v'+kerdess+'"></td> ';	
	a+='</tr>';
	kerdesektable.innerHTML+=a;
		for (i=1;i<kerdess;i++)
	{
		
		window['k'+i].value=kerdes[i];
		window['v'+i].value=valasz[i];
		
	}
}


//-----------------------------------------
//----STAGES-------------------------------
//-----------------------------------------
//STAGE1 

function create() {

}
//STAGE2
function save() {
//neddig van tartalom
stage.innerHTML='2';
rjsx.footer();
for (i=1;i<=kerdess;i++)
	{		
		kerdes[i]=window['k'+i].value;
		valasz[i]=window['v'+i].value;
		console.log(i+'SAVE:'+kerdes[i]+valasz[i]);
	}
	x('kerdesekq');
for (i=1;i<=kerdess;i++)
	{			
		kerdesekq.innerHTML+=kerdes[i]+' : '+valasz[i]+'<br>';		
	}
menu.innerHTML='<button onClick="backtoEdit();" class="btn-b">Vissza: Szerkesztés folytatása</button>	';
menu.innerHTML+='<button onClick="kikerdezo();" class="btn-b">Tovább!</button>	';
kerdesektable.innerHTML='';
	kerd[kerd[0]].kerdes=kerdes;
	kerd[kerd[0]].valasz=valasz;
	
	savejson();
	//localStorage.valasz=JSON.stringify(valasz);
}
function savejson() {
	
	aa=new Date;
	rjsx.notify("saved","black");
	if (newkik)
	{
		kerd[0]++;
	kerd[kerd[0]].stamp=aa.getFullYear()+' '+aa.getMonth()+'. '+aa.getUTCDate()+'. - '+aa.getHours()+' : '+aa.getMinutes();
	console.log("új");
	}
	localStorage.kerd=JSON.stringify(kerd);
}
function getjson() {
	if (localStorage.kerd!="")
	{
	kerd=eval(localStorage.kerd);
	
		for (i=kerd[0]-1;i>0;i--)
	{
	loadk.innerHTML='<input type="radio" name="select" id=checkbox'+i+'>'+i+' : '+kerd[i].name+' | '+kerd[i].stamp+'<br>'+loadk.innerHTML;	
	}

	}
	else {
		initkerd();
	}
}
function clearjson() {
	localStorage.kerd='-';
}
//STAGE3
function kikerdezo() {
rjsx.footer();
	stage.innerHTML='3';
	//focim.innerHTML='KiKérdező';
menu.innerHTML='<button onClick="save();"disabled class="btn-b">Megosztás</button>	';
menu.innerHTML+='<button onClick="save();"disabled class="btn-b">Szerkesztés</button>	';
menu.innerHTML+='<button onClick="ExamAlert();" class="btn-green">Vizsga</button>	<hr>';

kerdesekq.innerHTML='<button class="btn-b" onClick="mondkerdez()">kerdes</button>';
kerdesekq.innerHTML+='<button class="btn-green" onClick="mondvalasz()" id="gombvalasz">valasz</button>';
kerdesekq.innerHTML+='<div id="kim">itt fog megjelenni a kerdes</div> <span id="kimv"></span>';
}
//stage4
function exam() {
	kerdesholjar=1;//jelenlegi kérdés
	pontszam=0;//pontok 
	stage.innerHTML='4';
//	focim.innerHTML='KiKérdező Vizsga';
	menu.innerHTML='<button onClick="backtoEdit();" class="btn-b">Vissza: Szerkesztés és kilépés</button>	';	
	menu.innerHTML+='<span id="menuin"><button class="btn-b" onClick="kerdesjoe();mondkerdezexam();" id="gombvalasz">Következő kérdés</button></span>';
	menu.innerHTML+='<span id="kerdesjar">1</span>/'+kerdess+'. kérdés ';
	menu.innerHTML+='<span id="pontok"> '+pontszam+'</span>pont<hr>';
	kerdesekq.innerHTML='<div id="kim">itt fog megjelenni a kerdes</div> válasz:<span id="kimv">itt lesz</span>';
	kerdesekq.innerHTML+='<input class="inp-text" placeholder="válasz" id="valaszinp">';
	mondkerdez();
}
function ertekel() {
	//	kerdesjoe();
	

		 a='<div id="containerxx"> ';
  		 a+='<div id="bar-1" class="bar-main-container azure">';
  		 a+='<div class="wrap">';
       	a+=' <div class="bar-percentage" data-percentage="80"></div><hr>';
     	 a+='<div class="bar-container">';
         a+='<div class="barx"></div>';
     	 a+='</div></div></div> </div>';
     	 kerdesekq.innerHTML=a;
     	 document.getElementsByClassName("barx")[0].className="bar";
     	 percentage=Math.floor(pontszam/kerdess*100)+'%';
         	 $('.bar-percentage[data-percentage]').each(function () {
  $(this).text(percentage) && $(this).siblings().children().css('width',percentage);
});
}
//-----------------------------------------
//----BACKSTAGES---------------------------
//-----------------------------------------
function backtoEdit() {//vissza a szerkeszteshez
	stage.innerHTML='1';
	menu.innerHTML='<button onClick="addrow();" class="btn-r">Új Kérdés hozzáadása</button>';
	menu.innerHTML+='<button onClick="save();" class="btn-b">Tovább</button>';	
	

	kerdesekq.innerHTML='';
	a='';
	for (i=1;i<=kerdess;i++)
		{
	a+='<tr>';
	a+='<td><input type="text" class="inp-text" value="'+kerdes[i]+'" placeholder="kerdes '+i+'" id="k'+i+'"></td> ';	
	a+='<td><input type="text" class="inp-text" value="'+valasz[i]+'" placeholder="valasz '+i+'" id="v'+i+'"></td> ';	
	a+='</tr>';
		}
	
	kerdesektable.innerHTML=a;
	}

//-----------------------------------------
//-----CORE--------------------------------
//-----------------------------------------


function kerdesjoe() {//exam
		
	if (kerdesholjar>=kerdess-1){//ha vegigkerdezte
		menuin.innerHTML='<button onClick="kerdesjoe();ertekel();" class="btn-b">Eredmény</button>'
		
	}	
	if (kerdesholjar>kerdess) {	
	valaszinp.disabled=true;
	return true;
	}		
	else {
		if (valaszinp.value==valasz[jkerdes])
		{
	 	pontszam++;
		pontok.innerHTML=pontszam;
		}
	valaszinp.value="";
	kerdesholjar++;
	kerdesjar.innerHTML=kerdesholjar;
	}
}
function mondkerdez() {//kerzeo
	x('kimv');
	var aac = $('#kim' );
	aac.removeClass('aford');
	//jkerdes=examholjar++;
	jkerdes=Math.ceil(Math.random()*kerdess);
	console.log(jkerdes);
	if (kerdes[jkerdes].search("http://")=="-1")
	{
	setTimeout(function(){kim.innerHTML=kerdes[jkerdes]},500);
	}
	else {
	setTimeout(function(){kim.innerHTML='<img src="'+kerdes[jkerdes]+'" width="150px">';},800);
	}
	kim.innerHTML+=' ';
	gombvalasz.disabled=false;
}
function mondkerdezexam() {//kerzeo
	x('kimv');
	jkerdes=examholjar++;
	//jkerdes=Math.ceil(Math.random()*kerdess);
	console.log(jkerdes);
	if (kerdes[jkerdes].search("http://")=="-1")
	{
	kim.innerHTML=kerdes[jkerdes];
	}
	else {
	kim.innerHTML='<img src="'+kerdes[jkerdes]+'" width="150px">';
	}
	kim.innerHTML+=' ';
	gombvalasz.disabled=false;
}
function mondvalasz() {//valaszolo
	var aac = $('#kim' );
	aac.addClass('aford');
	setTimeout(function(){kim.innerHTML=valasz[jkerdes]},500);
	gombvalasz.disabled=true;
}
//JSON fonfiguration
var examholjar = 1;
//conifrm
function ExamAlert() {
examholjar=1;
exam();
}
function init()
{
	var radios = document.getElementsByName('select');

	for (var i = 0, length = radios.length; i < length; i++) {
	    if (radios[i].checked) {
	        // do whatever you want with the checked radio
	        jelolt=i;
	        // only one radio can be logically checked, don't check the rest
	      
	    }
	}
	if (jelolt!=0)
	{
		console.log(jelolt)
	kerdes=kerd[jelolt].kerdes;
	valasz=kerd[jelolt].valasz;
	
	}
	else {
		newkik=true;
				for (i=0;i<101;i++)
		{
			kerdes[i]="";
			valasz[i]="";
		}
	}
	kerd[kerd[0]].name=kikernev.value;
	kerdesekq.innerHTML='';
stage.innerHTML='1';
menu.innerHTML='<button onClick="addrow();" class="btn-r">Új Kérdés hozzáadása</button>';
menu.innerHTML+='<button onClick="save();" class="btn-b">Tovább</button>';
kerdesektable.innerHTML='<tr><td><textarea type="text" class="inp-text" placeholder="kerdes 1" id="k1"></textarea></td> 	<td> <input type="text" class="inp-text" placeholder="valasz 1" id="v1"></td></tr>';

addrow();
}



//init();
/*
width="300";
	loginform='';
	loginform+='<div id="wn_alert">';
	loginform+='<div style="position:absolute;width:100%;height:100%;background-color:rgba(75,75,75,0.75);top:0px;bottom:0px;left:0px;right:0px;" id="wn_disabler" >';	
	loginform+='</div>';
	loginform+='<div id="wn_mid"style="position:fixed;top:10%;bottom:auto;width:100%;"><div style="margin-left:auto;margin-right:auto;opacity:0.9;border:1px solid rgb(75,75,75);border-radius:5px;background-color:#ffffff;padding:12pt;width:'+width+'pt;" id="wn_form">';
loginform+='<center><b>Figyelem! a Vizsgára korlátozott idő áll rendelkezésre,és csak a PONTOS választ fogadjuk el</b></center><br>';	
	loginform+="<hr><button class='btn-b' style='float:left;'id='no_alert' onClick='CloseAlert();exam();'>Tovább</button>";
	
	loginform+="<button class='btn-r' id='ok_alert' onClick='CloseAlert();'>Felkészülés folytatása</button>";
	
	loginform+='</div></div>';
	loginform+='</div>';
	body.innerHTML+=loginform;*/


//RELEASE LOG--------------------------------------------------------------------RL

//ver 1 : original kikerdezo 		2013[MARC??]
//ver 2 								[JUNI30]
 //   2.1  restarting
 //   2.2  input bug fix
 //   2.3  összeállító finished
 //   2.4  kikérdező finished
 //   2.5  Exam finished, [STRESSTEST]
 
 //   2.6  added back to STAGE(1)		[JULI01]
 //   2.7  debug
 //   2.75 added precentage, [STABLE]
 //   2.8  bugfix with exam points      [JULI02]
 //   2.9  finished ertekel.             
 
//ver 3 : is online version
//ver 4 : restarted 					[NOV19]
 //   4.1  started object-localstorage  [NOV24]
 //   4.2  finished, bugfix, textarea
</script>

	
	<body >
	<div id="navbar">
	 </div>
	

<div id="body">
<rts></rts>

<span id="stage">előkészítő
</span>. lépés

<div id="menu">	
<button class="btn-b" onclick="init();">Kikérdező betöltése/új</button>


</div>
<div id="kerdesekq">

Üdvözlünk a Kikérdező v4.2-ben<br>

<input type="radio" name="select" id="checkbox0" checked>ÚJ &gt;Kikérdező neve: 
<input type="text" class="inp-text" id="kikernev"/><br />
<div id="loadk">
</div>
	</div>
<table id="kerdesektable">



	</table>
	
	<script src="main.js" type="text/javascript"></script>
	<style>
button, .btn-r,.btn-b,.btn-green {
/*font-size:16px;*/
}
textarea {
    /*  */
    font-size:20px;
  }
  #kim {
height: 25%;
position: absolute;
width: 30%;
padding: 20px;
text-align: center;
border: 1px solid #444;
margin-left: 30%;
margin-right: 30%;
background: #F1F1F1;
box-shadow: 0px 2px 4px #999;
    
  
-webkit-transition: -webkit-transform 1s;
    }
    
#kim.aford {
    /*  */
      -webkit-transform: rotateX(180deg)  rotateY(180deg) rotate(180deg);
	 
  }

</style>
<script>

getjson();
</script>
	</Body>
</HTML>
