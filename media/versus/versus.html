<!DOCTYPE HTML>
<HTML>
    <Head>
        <title>Versus</title>
      <meta charset="UTF-8">
        <meta name="author" content="TAP">
      <meta name="description" content="rontap">
        <meta name="keywords" content="rontap,linux,elemential,tapsite,rts,rjsx">

    <script>
        navname="versus"; //hogy jelenik majd meg
        coa=false;      
        moretag=true;
        specnav=true;
        rjsxlocation="http://rontap.netne.net/tahr/";
        //holvan
        manimg="http://rontap.netne.net/rontap/f_icons/config-users.svg";
        specnav=true;
		specnavi = ['kezdőlap','profilom','tag felhő'];
		specnavil = ['index.html','me.html','cloud.html'];
		
</script>
     <script src="http://elemential.net/lapis/lapisclient.js" type="text/javascript"></script>
    </Head>

 
    <body id="body">


    <rts></rts>
    
    <content>
    	
    	<container id="tags">
    		Címkék
    		<b><span class="tag" onclick="location.href='tag.html'">Informatika</span></b>
    		<span class="tag">operációs rendszerek</span>
    		<span class="tag">windows</span>
    		<span class="tag">linux</span>
    	</container>
    	
    	<header id="vs_question">Jobb-e a Windows a Linuxnál?</header>
    	<center id="vs_desc">
    		Jó hosszú ideje folyik a harc a két operációs rendszer között, és én nem tudok dönteni. Szerintetek jobb-e a windows?
    	</center>
    	<br>
    	<table class="norjsx table">
    		
    		
    		<tr>
    			<td onclick="vote(true);/*setlife([25,68,90,75,41,95,40]);*/">
    				<div  class="bars"><img src="ok.png" width="30px;" >
    					<span class="arg">Igen, mert:</span>
    					</div>
    				<span class="words" id="vs_yesdesc">Sokkal több játék érhető el, és ingyen is hozzá lehet jutni</span>
					
					    				</td>
    			<td onclick="vote(false);/*setlife([89,68,12,75,20,60,20]);*/">
    				<div class="bars"><img src="no.png" width="30px;">
    					<span class="arg">Nem, mert:</span>
					</div>
    				<span class="words" id="vs_nodesc">Sokkal gyorsabb, személyreszabhatóbb, és egyre törekszik fel a játékok terén is</span>
    				</td>
    				
    			</td>
    		</tr>
    	</table>
    	
    	<div class="outable">
    	<table class="norjsx otable" >
    		<tr>
    			<td>-15</td>
    			<td></td>
    			<td></td>
    		</tr>
    	</table>
    	<table class="norjsx otable" >
    		<tr>
    			<td>15-22</td>
    			<td></td>
    			<td></td>
    		</tr>
    	</table>
    	<table class="norjsx otable" >
    		<tr>
    			<td>22-40</td>
    			<td></td>
    			<td></td>
    		</tr>
    	</table>
    	<table class="norjsx otable" >
    		<tr>
    			<td>40-55</td>
    			<td></td>
    			<td></td>
    		</tr>
    	</table>
    	<table class="norjsx otable" >
    	<tr>
    			<td>55-</td>
    			<td></td>
    			<td></td>
    		</tr>
    	</table>
    	</div>
   
    
    
    <div class="outable">
    	<table class="norjsx otable" >
    	<tr>
    			<td>Férfi</td>
    			<td></td>
    			<td></td>
    		</tr>
    	</table>
    	<table class="norjsx otable" >
    	<tr>
    			<td>Nő</td>
    			<td></td>
    			<td></td>
    		</tr>
    	</table>
    	
    </div>
    
    
     </content>
    <footeri id="footeri" onClick="printnext();">
    	<img src="http://rontap.netne.net/tahr/back4.png">
    	<span id="tovabba">Tovább a következő kérdésre</span>
    </footeri>
    
  

    
    <script>
      function endlogin(data)
      {
        data=JSON.parse(data);
			  printquestion(data.id);
			  send((data.yes>data.no) ? 69 : 42,data.yes,data.no);
			  setlife(data.results);
      }
      function loginWithLapis()
      {
        lapis.showform(endlogin);
      }
    	
document.getElementsByClassName("words")[0].innerHTML+=' <code>'+document.getElementsByClassName("words")[0].innerHTML.length+' betű<code>'
document.getElementsByClassName("words")[1].innerHTML+=' <code>'+document.getElementsByClassName("words")[1].innerHTML.length+' betű<code>'
var qid=3;
var incall=false;

function send(call,yes,no) {
	for (i=document.getElementsByClassName("tr").length;i<2;i++)
	{
		document.getElementsByClassName("words")[i].innerHTML="";
		document.getElementsByTagName("tr")[0].style.lineHeight="0";
		document.getElementsByClassName("bars")[i].style.marginBottom="0";
		document.getElementsByTagName("td")[0].style.paddingBottom="0px";
		document.getElementsByTagName("td")[1].style.paddingBottom="0px";
		//console.log(i);
	}
		document.getElementsByClassName("arg")[0].innerHTML=yes;
		document.getElementsByClassName("arg")[1].innerHTML=no;
		document.getElementsByTagName("table")[0].style.tableLayout="inherit";
		document.getElementsByTagName("td")[0].width="50%";
		setTimeout(function(){set(call)},100);
		
		footeri.innerHTML="<img src='http://rontap.netne.net/tahr/back4.png'> autómatikus továbblépés <span id='tleft'>10</span> sec múlva";
		footeri.style.background="#48F";
		footeri.style.color="#444";
		count();

}
function set(call) {	
	document.getElementsByTagName("td")[0].width=call+"%";
}


function setlife(call)
{	
	w=$(".otable").width()-62;	
	for (i=0;i<7;i++)
	{	
			
			lifesupport(w,i,call);
		
	}
	
}
function lifesupport(w,i,call) {
	setTimeout(function(){			
		document.getElementsByClassName("otable")[i].style.opacity="1";
		a=(w/100)*call[i];
		document.getElementsByClassName("otable")[i].getElementsByTagName("td")[1].style.width=a+"px";
		document.getElementsByClassName("otable")[i].getElementsByTagName("td")[2].style.width=(w-a)+"px";
		//console.log(a+"%");
		//console.log(w);	
	},150*i);
}
countn=10;
timerstop=false;
timerrun=false;
function count() {
    timerrun=false;
	countn--;
	tleft.innerHTML=countn;
	if (countn==0)
	{
	  printnext();
	  send(50,'Igen, mert','Nem, mert');
	  	footeri.innerHTML="<img src='http://rontap.netne.net/tahr/back4.png'> Tovább a következő kérdésre ";
		footeri.style.background="#DDD";
		footeri.style.color="#444";

	  
	}
	else if(!timerstop)
	{
		timerrun=true;
		setTimeout(function(){count();},1000);
	}
	else
	{
	  timerstop=false;
	}
}
function vote(call) {
	answer = (call) ? 1 : 0; //if (call) { answer=1; } else { answer=0; }
	$.get('http://elemential.net/versus/app/answer.php?id=' + qid + '&value=' + answer,function(data){
		data=JSON.parse(data);
		if(data.errno==2)
		{
			loginWithLapis('http://elemential.net/versus/app/login.php');
		}
		else if(data.errno)
		{
			rjsx.notify(data.message,'red');
			console.error(data);
		}
		else
		{
			send(call ? 69 : 42,data.yes,data.no);
			setlife(data.results);
		}
	});
}
function printquestion(call)
{
	qid=call;
	$.get('http://elemential.net/versus/app/question.php?id=' + qid,function(data){
		data=JSON.parse(data);
		if(data.errno==2)
		{
			loginWithLapis('http://elemential.net/versus/app/login.php');
		}
		else if(data.errno)
		{
			rjsx.notify(data.message,'red');
			console.error(data);
		}
		else
		{
			vs_question.innerHTML=data.question;
			vs_desc.innerHTML=data.desc;
			vs_yesdesc.innerHTML=data.yesdesc;
			vs_nodesc.innerHTML=data.nodesc;
			tags.innerHTML='Címkék ';
			for(i=0;i<data.tags.length;i++)
			{
				tags.innerHTML+='<span class="tag" onclick="location.href='+"'tag.html?tag="+data.tags[i]+"'"+'">'+data.tags[i]+'</span> ';
			}
			resetstyle();
		}
	    
	});
	
	
}
function printnext()
{
	clearlife();
	timerstop=timerrun;
	countn=10;
	$.get('http://elemential.net/versus/app/getnext.php',function(data){
		data=JSON.parse(data);
		if(data.errno==2)
		{
			loginWithLapis('http://elemential.net/versus/app/login.php');
		}
		else if(data.errno)
		{
			rjsx.notify(data.message,'red');
			console.error(data);
		}
		else
		{
		  //console.log(data);
			vs_question.innerHTML=data.question;
			vs_desc.innerHTML=data.desc;
			vs_yesdesc.innerHTML=data.yesdesc;
			vs_nodesc.innerHTML=data.nodesc;
			tags.innerHTML='Címkék ';
			for(i=0;i<data.tags.length;i++)
			{
				tags.innerHTML+='<span class="tag">'+data.tags[i]+'</span> ';
			}
			qid=data.id;
			resetstyle();
		}
	});
	
}
function resetstyle() {
document.getElementsByTagName("td")[0].style.paddingBottom="10px";
document.getElementsByTagName("td")[1].style.paddingBottom="10px";
document.getElementsByTagName("tr")[0].style.lineHeight="inherit";
document.getElementsByClassName("bars")[0].style.marginBottom="10px";
document.getElementsByClassName("bars")[1].style.marginBottom="10px";
}
function clearlife()
{
	for (i=0;i<7;i++)
	{
		document.getElementsByClassName("otable")[i].style.opacity="0";
	}
}
indraw=false;
interval=setInterval(function(){
	if(window['$']!=undefined && ! indraw)
	{
		indraw=true;
		$_GET=getjs();
		if($_GET['action']=="showanswers" && false)
		{
			$_GET['data']=JSON.parse($_GET['data'].replace(/%22/g,'"'));
			printquestion($_GET['data'].id);
			setlife($_GET['data'].results);
		}
		else if($_GET['action']=="question")
		{
			printquestion($_GET['q']);
		}
		else
		{
			printnext();
		}
		
		var topos = $('#tags').position();
		$(window).scroll(function () {
		  if ($(window).scrollTop() > topos.top-100) {
			  tags.style.boxShadow = "10px 0px 10px #999";
			} else {
			  tags.style.boxShadow = "0px 0px 0px #999";
			}
		});
		
		lapis.init('http://elemential.net/versus/app/login.php');
    lapis.json=true;
		
		clearInterval(interval);
		indraw=false;
	}
},1);
	
	
    </script>
    
     <script src="master.js" type="text/javascript"></script>
    <link rel="stylesheet" href="master.css" type="text/css" media="screen" title="no title" charset="utf-8"/>
    <script src="http://rontap.netne.net/tahr/main.js" type="text/javascript"></script>
	<style>
				#tags {
	-webkit-transition: box-shadow 0.5s;
	}	
	</style>
    </Body>
    
</HTML>


